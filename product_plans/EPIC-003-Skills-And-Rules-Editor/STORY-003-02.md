---
id: STORY-003-02
parent_epic: EPIC-003
status: Draft
actor: Full-Stack Developer
complexity: High (4+ files)
---
# STORY-003-02: Skill Templates

## 1. The Spec (The Contract)

### 1.1 User Story
**As a** Full-Stack Developer,
**I want** a set of 10 default skill template markdown files covering major languages and cross-cutting concerns,
**So that** users get practical, actionable coding guidelines their AI agent can follow out of the box, without writing skills from scratch.

### 1.2 Detailed Requirements
- **Requirement 1**: Create 10 markdown files in `templates/skills/`:
  - `general.md` — universal coding best practices (naming, functions, DRY, SOLID basics)
  - `typescript.md` — TS-specific patterns (strict types, no `any`, interface vs type, async/await, error handling)
  - `python.md` — Python patterns (type hints, docstrings, virtual envs, PEP8)
  - `go.md` — Go patterns (error handling, goroutines, interfaces, packages)
  - `java.md` — Java patterns (generics, streams, exceptions, Spring conventions)
  - `rust.md` — Rust patterns (ownership, lifetimes, Result/Option, trait design)
  - `csharp.md` — C# patterns (async/await, LINQ, nullable references, dependency injection)
  - `ruby.md` — Ruby patterns (blocks, modules, Rails conventions, testing)
  - `error-handling.md` — cross-language error handling patterns
  - `testing.md` — cross-language testing best practices
- **Requirement 2**: Each template must be 40-80 lines of practical, actionable rules written as directives an AI coding agent would follow (imperative voice: "Always...", "Never...", "Prefer...").
- **Requirement 3**: Each file begins with a `# [Skill Name]` heading and a one-line description of scope.
- **Requirement 4**: Rules are organized under `##` sub-sections (e.g., `## Naming`, `## Functions`, `## Error Handling`).
- **Requirement 5**: Rules use markdown bullet lists with concise, specific guidance — no vague platitudes.
- **Requirement 6**: Language-specific templates include brief code snippet examples (fenced code blocks) where clarity demands it.
- **Requirement 7**: Files are read-only defaults; users can override them per-repo via the Skills API (STORY-003-04).

---

## 2. The Truth (Executable Tests)

### 2.1 Acceptance Criteria (Gherkin)
```gherkin
Feature: Skill Templates

  Scenario: All 10 skill templates exist
    Given the templates/skills/ directory
    When I list its contents
    Then it contains exactly 10 .md files
    And the files are: general.md, typescript.md, python.md, go.md, java.md, rust.md, csharp.md, ruby.md, error-handling.md, testing.md

  Scenario: Each template meets length requirements
    Given a skill template file
    When I count its lines
    Then it has between 40 and 80 lines (inclusive)

  Scenario: Each template has a proper heading
    Given a skill template file
    When I read the first line
    Then it starts with "# "

  Scenario: Templates are valid markdown
    Given a skill template file
    When I parse it as markdown
    Then it parses without errors
    And it contains at least two "## " subsection headings

  Scenario: Template loader can read all skill templates
    Given all 10 skill template files exist
    When I call listTemplates("skills")
    Then it returns 10 TemplateResult objects
    And each has isDefault true
```

### 2.2 Verification Steps
- [ ] `ls templates/skills/` shows exactly 10 `.md` files.
- [ ] Each file is between 40 and 80 lines.
- [ ] Each file starts with a level-1 heading (`# `).
- [ ] Each file has at least two level-2 headings (`## `).
- [ ] Content is practical and actionable (no filler text).
- [ ] `loadTemplate("skills", "typescript.md")` returns valid content via the template loader (STORY-003-01).

---

## 3. The Implementation Guide (AI-to-AI)

### 3.1 Context & Files
- **Primary Files**: 10 new files in `templates/skills/`
- **Related Files**: `src/server/templates/loader.ts` (STORY-003-01, reads these files)
- **New Files Needed**:
  - `templates/skills/general.md`
  - `templates/skills/typescript.md`
  - `templates/skills/python.md`
  - `templates/skills/go.md`
  - `templates/skills/java.md`
  - `templates/skills/rust.md`
  - `templates/skills/csharp.md`
  - `templates/skills/ruby.md`
  - `templates/skills/error-handling.md`
  - `templates/skills/testing.md`

### 3.2 Technical Logic

Each skill template follows this structure pattern:

```markdown
# [Skill Name]

[One-line description of what this skill covers.]

## [Section 1]

- Rule 1
- Rule 2
- ...

## [Section 2]

- Rule 1
- ...
```

**File 1: `templates/skills/general.md`** (universal coding best practices)

Sections to include:
- `## Naming` — descriptive names, avoid abbreviations, boolean prefixes (is/has/can), constants in UPPER_SNAKE_CASE
- `## Functions` — single responsibility, max 40 lines, max 4 parameters, pure functions preferred, early returns
- `## Code Organization` — DRY principle, group related code, keep files under 300 lines, clear module boundaries
- `## SOLID Basics` — single responsibility for classes/modules, depend on abstractions, open for extension
- `## Comments & Documentation` — explain why not what, document public APIs, no commented-out code, update docs with code
- `## General Patterns` — fail fast, avoid magic numbers/strings, prefer immutability, use guard clauses

**File 2: `templates/skills/typescript.md`** (TypeScript patterns)

Sections to include:
- `## Type Safety` — enable strict mode, never use `any` (use `unknown`), prefer interfaces for object shapes, use type for unions/intersections, leverage discriminated unions
- `## Async Patterns` — always await promises, use `Promise.all` for parallel ops, handle rejections, avoid `async void`, use `AbortController` for cancellation
- `## Error Handling` — use typed errors (extend Error), exhaustive switch with `never`, Result pattern for expected failures, validate at boundaries
- `## Code Patterns` — prefer `const` over `let`, use optional chaining, nullish coalescing, readonly arrays/objects, use `satisfies` operator for type checking
- Include brief code examples for discriminated unions and typed errors

**File 3: `templates/skills/python.md`** (Python patterns)

Sections to include:
- `## Type Hints` — annotate all function signatures, use `Optional[]` not `Union[X, None]` (or `X | None` for 3.10+), use `TypedDict` for dict shapes, run mypy
- `## Code Style` — follow PEP 8, use f-strings, list/dict comprehensions over map/filter, context managers for resources
- `## Functions & Classes` — docstrings on public functions (Google style), use dataclasses or Pydantic, prefer composition over inheritance
- `## Error Handling` — specific exception types, never bare `except:`, use custom exception hierarchy, logging with context
- `## Dependencies` — always use virtual environments, pin versions, minimal dependency footprint

**File 4: `templates/skills/go.md`** (Go patterns)

Sections to include:
- `## Error Handling` — always check returned errors, wrap errors with `fmt.Errorf("context: %w", err)`, use sentinel errors or custom error types, never panic in library code
- `## Concurrency` — use goroutines with proper synchronization, prefer channels for communication, use `context.Context` for cancellation, avoid goroutine leaks
- `## Interfaces` — define interfaces at the consumer side, keep interfaces small (1-3 methods), accept interfaces return structs
- `## Packages & Structure` — flat package structure, avoid package-level state, descriptive package names (not `util`), internal/ for private packages

**File 5: `templates/skills/java.md`** (Java patterns)

Sections to include:
- `## Type System` — use generics to avoid casts, prefer `Optional<T>` over null returns, use sealed classes/interfaces (Java 17+), leverage records for data classes
- `## Streams & Collections` — prefer streams for transformations, use `var` for local variables with clear types, immutable collections by default (`List.of()`, `Map.of()`)
- `## Error Handling` — use checked exceptions for recoverable conditions, runtime exceptions for programming errors, never catch `Throwable`, create domain-specific exception hierarchies
- `## Spring Conventions` — constructor injection over field injection, use `@Transactional` at service layer, profiles for env config, thin controllers (delegate to services)

**File 6: `templates/skills/rust.md`** (Rust patterns)

Sections to include:
- `## Ownership & Borrowing` — prefer borrowing over cloning, use lifetimes only when compiler requires, minimize `'static` usage, use `Cow<str>` for flexible ownership
- `## Error Handling` — use `Result<T, E>` for fallible operations, implement `thiserror` for library errors, use `anyhow` for application errors, `?` operator for propagation
- `## Traits & Types` — prefer trait bounds over trait objects when possible, use `From/Into` for conversions, implement `Display` and `Debug`, keep trait definitions small
- `## Safety & Performance` — avoid `unsafe` unless absolutely necessary, use iterators over indexing, prefer `Vec` pre-allocation when size is known, document all unsafe blocks

**File 7: `templates/skills/csharp.md`** (C# patterns)

Sections to include:
- `## Async/Await` — always use `async Task` not `async void` (except event handlers), use `ConfigureAwait(false)` in library code, prefer `ValueTask` for hot paths, cancellation tokens for long operations
- `## LINQ & Collections` — use LINQ for queries over manual loops, prefer `IReadOnlyList<T>` in APIs, use `ImmutableArray` for thread-safe collections, avoid `Count()` on IEnumerable (use `Any()`)
- `## Nullable References` — enable nullable reference types (`<Nullable>enable</Nullable>`), annotate all public APIs, use `required` keyword (C# 11+), null-forgiving operator only with documented reason
- `## Dependency Injection` — use constructor injection, register services in composition root, prefer `IOptions<T>` for config, scope services appropriately (transient/scoped/singleton)

**File 8: `templates/skills/ruby.md`** (Ruby patterns)

Sections to include:
- `## Style & Idioms` — use blocks and iterators over loops, prefer symbols over strings for keys, use `freeze` for string constants, leverage `Enumerable` methods
- `## Modules & Classes` — prefer composition with modules, use `include` for behavior, `extend` for class methods, keep classes focused (< 100 lines)
- `## Rails Conventions` — thin controllers fat models (or service objects), use scopes for queries, strong parameters for input, background jobs for slow operations
- `## Testing` — write RSpec tests with descriptive `describe`/`it` blocks, use factories over fixtures, test behavior not implementation, mock external services

**File 9: `templates/skills/error-handling.md`** (cross-language error handling)

Sections to include:
- `## Principles` — fail fast at boundaries, never swallow errors silently, always log with context (operation, input, user), use structured error types
- `## Patterns` — use Result/Either types where available, validate inputs at entry points, propagate or handle (never ignore), distinguish expected failures from bugs
- `## Logging` — include correlation IDs, log at appropriate levels (error for failures, warn for degradation, info for operations), never log sensitive data
- `## Recovery` — implement retries with exponential backoff for transient failures, circuit breaker for cascading failures, graceful degradation over hard failure

**File 10: `templates/skills/testing.md`** (cross-language testing best practices)

Sections to include:
- `## Test Structure` — Arrange/Act/Assert pattern, one logical assertion per test, descriptive test names that state the expected behavior, test files mirror source structure
- `## Unit Tests` — test behavior not implementation, mock only external dependencies, prefer fakes over mocks when possible, keep tests independent (no shared mutable state)
- `## Integration Tests` — test real interactions between modules, use test databases/containers, clean up after each test, test error paths not just happy path
- `## Practices` — write tests before or alongside code (not after), maintain test coverage for critical paths, fast tests run first (unit before integration), test edge cases and boundaries

### 3.3 API Contract
N/A — these are static template files read by the template loader (STORY-003-01).

---

## 4. Definition of Done (The Gate)
- [ ] All 10 `.md` files exist in `templates/skills/`.
- [ ] Each file is between 40 and 80 lines.
- [ ] Each file starts with a `# ` heading and contains at least two `## ` subsections.
- [ ] Content is practical, specific, and written as directives for an AI coding agent.
- [ ] Language-specific templates include relevant code snippet examples.
- [ ] `listTemplates("skills")` from the template loader returns 10 results.
- [ ] No typos or broken markdown formatting.
