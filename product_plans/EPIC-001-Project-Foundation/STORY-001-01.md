---
id: STORY-001-01
parent_epic: EPIC-001
status: Done
actor: Full-Stack Developer
complexity: Medium (2-3 files)
---
# STORY-001-01: Project Config & Directory Structure

## 1. The Spec (The Contract)

### 1.1 User Story
**As a** Full-Stack Developer,
**I want** a fully configured TypeScript project with the correct directory structure, package dependencies, and build settings,
**So that** all subsequent stories can build on a consistent, working foundation without needing to fix project scaffolding.

### 1.2 Detailed Requirements
- **Requirement 1**: Create `package.json` with name `"vibelint"`, type `"module"`, TypeScript as the primary language, and a `bin` entry pointing to `bin/vibelint.ts` (executed via `tsx`).
- **Requirement 2**: Create `tsconfig.json` with `strict: true`, ESM module output (`"module": "NodeNext"`, `"moduleResolution": "NodeNext"`), and path aliases (`@server/*` maps to `src/server/*`, `@client/*` maps to `src/client/*`).
- **Requirement 3**: Create `.gitignore` covering `node_modules/`, `dist/`, `data/`, `.env`, `*.db`, and OS files (`.DS_Store`, `Thumbs.db`).
- **Requirement 4**: Create the full directory tree as specified in the PRD:
  - `bin/`
  - `src/server/`, `src/server/api/`, `src/server/analyzer/`, `src/server/analyzer/languages/`, `src/server/injector/`, `src/server/injector/platforms/`, `src/server/git/`, `src/server/vdoc/`, `src/server/db/`, `src/server/utils/`
  - `src/client/`, `src/client/pages/`, `src/client/components/`, `src/client/lib/`
  - `templates/`, `templates/skills/`, `templates/rules/`, `templates/commands/`, `templates/config/`
  - `tests/`, `tests/server/`, `tests/analyzer/`, `tests/fixtures/`
- **Requirement 5**: Install production dependencies: `fastify`, `better-sqlite3`, `yaml`, `open`.
- **Requirement 6**: Install dev dependencies: `tsx`, `typescript`, `@types/node`, `@types/better-sqlite3`.
- **Requirement 7**: Add npm scripts: `"dev"` (tsx watch), `"build"` (tsc), `"start"` (node dist/bin/vibelint.js).

---

## 2. The Truth (Executable Tests)

### 2.1 Acceptance Criteria (Gherkin)
```gherkin
Feature: Project Config & Directory Structure

  Scenario: package.json is valid and complete
    Given the project root contains a package.json
    When I read the package.json
    Then the "name" field is "vibelint"
    And the "type" field is "module"
    And the "bin" field contains a "vibelint" entry
    And dependencies include "fastify", "better-sqlite3", "yaml", "open"
    And devDependencies include "tsx", "typescript", "@types/node", "@types/better-sqlite3"

  Scenario: TypeScript is configured correctly
    Given the project root contains a tsconfig.json
    When I read the tsconfig.json
    Then "strict" is true
    And "module" is "NodeNext"
    And path aliases "@server/*" and "@client/*" are defined

  Scenario: All directories exist
    Given the project has been initialized
    When I check the file system
    Then all required directories exist as empty folders with .gitkeep files

  Scenario: Dependencies install without errors
    Given the package.json is valid
    When I run "npm install"
    Then the command exits with code 0
    And node_modules/ is populated
```

### 2.2 Verification Steps
- [ ] `package.json` parses as valid JSON and contains all required fields.
- [ ] `tsconfig.json` parses as valid JSON and compiles with `npx tsc --noEmit` (once source files exist).
- [ ] `.gitignore` contains entries for `node_modules/`, `dist/`, `data/`, `.env`.
- [ ] Every directory in the PRD tree exists.
- [ ] `npm install` completes with exit code 0.
- [ ] `npx tsc --version` confirms TypeScript is available.

---

## 3. The Implementation Guide (AI-to-AI)

### 3.1 Context & Files
- **Primary Files**: `package.json`, `tsconfig.json`, `.gitignore`
- **Related Files**: None (greenfield)
- **New Files Needed**: Yes
  - `package.json`
  - `tsconfig.json`
  - `.gitignore`
  - `.gitkeep` files in each empty directory

### 3.2 Technical Logic

**Step 1: Create `package.json`**

```json
{
  "name": "vibelint",
  "version": "0.1.0",
  "description": "Local web app for preparing AI coding context files",
  "type": "module",
  "main": "dist/server/index.js",
  "bin": {
    "vibelint": "./bin/vibelint.ts"
  },
  "scripts": {
    "dev": "tsx watch bin/vibelint.ts",
    "dev:client": "vite",
    "build": "tsc && vite build",
    "start": "node dist/bin/vibelint.js",
    "lint": "tsc --noEmit"
  },
  "dependencies": {
    "better-sqlite3": "^11.7.0",
    "fastify": "^5.2.0",
    "open": "^10.1.0",
    "yaml": "^2.7.0"
  },
  "devDependencies": {
    "@types/better-sqlite3": "^7.6.12",
    "@types/node": "^22.12.0",
    "tsx": "^4.19.0",
    "typescript": "^5.7.0"
  }
}
```

**Step 2: Create `tsconfig.json`**

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "outDir": "dist",
    "rootDir": ".",
    "baseUrl": ".",
    "paths": {
      "@server/*": ["src/server/*"],
      "@client/*": ["src/client/*"]
    }
  },
  "include": ["src/**/*.ts", "src/**/*.tsx", "bin/**/*.ts"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

**Step 3: Create `.gitignore`**

```
node_modules/
dist/
data/
.env
*.db
.DS_Store
Thumbs.db
*.log
.vite/
```

**Step 4: Create directory tree with `.gitkeep` files**

Use `mkdir -p` for each directory path and place a `.gitkeep` in every leaf directory that has no source files yet:

```bash
dirs=(
  bin
  src/server/api
  src/server/analyzer/languages
  src/server/injector/platforms
  src/server/git
  src/server/vdoc
  src/server/db
  src/server/utils
  src/client/pages
  src/client/components
  src/client/lib
  templates/skills
  templates/rules
  templates/commands
  templates/config
  tests/server
  tests/analyzer
  tests/fixtures
)
for d in "${dirs[@]}"; do
  mkdir -p "$d"
  touch "$d/.gitkeep"
done
```

**Step 5: Run `npm install`** to generate `package-lock.json` and populate `node_modules/`.

### 3.3 API Contract
N/A — this story is project scaffolding only.

---

## 4. Definition of Done (The Gate)
- [ ] `package.json` exists with correct name, type, bin, dependencies, and scripts.
- [ ] `tsconfig.json` exists with strict mode, ESM, and path aliases.
- [ ] `.gitignore` exists with all required entries.
- [ ] All 18 directories from the PRD exist in the file system.
- [ ] `npm install` succeeds with exit code 0.
- [ ] No TypeScript compilation errors when running `npx tsc --noEmit` (ignoring missing source files — expected at this stage).
