---
id: STORY-001-02
parent_epic: EPIC-001
status: Draft
actor: Frontend Developer
complexity: High (4+ files)
---
# STORY-001-02: Vite + React + Tailwind App Shell

## 1. The Spec (The Contract)

### 1.1 User Story
**As a** Frontend Developer,
**I want** a Vite-powered React application with Tailwind CSS styling and React Router navigation,
**So that** all frontend pages have a consistent shell, routing infrastructure, and dev-server proxy to the Fastify backend.

### 1.2 Detailed Requirements
- **Requirement 1**: Create `vite.config.ts` with the React plugin, dev-server proxy from `/api` to `http://localhost:3847`, and build output directory `dist/client`.
- **Requirement 2**: Configure Tailwind CSS v4 with a basic theme (or Tailwind v3 with `tailwind.config.js`, `postcss.config.js`).
- **Requirement 3**: Create `src/client/index.html` as the SPA entry point with a `<div id="root">` mount point.
- **Requirement 4**: Create `src/client/main.tsx` that renders `<App />` into the root div.
- **Requirement 5**: Create `src/client/App.tsx` with React Router `<BrowserRouter>` and placeholder routes for: Dashboard (`/`), SetupWizard (`/setup`), SkillsEditor (`/skills`), RulesEditor (`/rules`), AnalysisView (`/analysis`), PRNavigator (`/pr`), Trends (`/trends`), DocsStatus (`/docs-status`), Settings (`/settings`).
- **Requirement 6**: Create a `src/client/components/Layout.tsx` shell with a sidebar navigation and main content area.
- **Requirement 7**: Install dev dependencies: `vite`, `@vitejs/plugin-react`, `react`, `react-dom`, `react-router-dom`, `tailwindcss`, `postcss`, `autoprefixer`, `@types/react`, `@types/react-dom`.

---

## 2. The Truth (Executable Tests)

### 2.1 Acceptance Criteria (Gherkin)
```gherkin
Feature: Vite + React + Tailwind App Shell

  Scenario: Vite dev server starts successfully
    Given the project dependencies are installed
    When I run "npx vite --port 5173"
    Then the dev server starts without errors
    And it serves index.html at http://localhost:5173

  Scenario: API proxy forwards requests to Fastify
    Given the Vite dev server is running
    And the Fastify server is running on port 3847
    When I navigate to http://localhost:5173/api/health
    Then the response is proxied from the Fastify server

  Scenario: All routes render without errors
    Given the app is loaded in a browser
    When I navigate to each defined route
    Then each route renders a placeholder page component
    And no console errors appear

  Scenario: Tailwind CSS classes are applied
    Given the app is loaded in a browser
    When I inspect the rendered HTML
    Then Tailwind utility classes are resolved to actual CSS styles

  Scenario: Production build succeeds
    Given the project dependencies are installed
    When I run "npx vite build"
    Then the build completes without errors
    And output is written to dist/client/
```

### 2.2 Verification Steps
- [ ] `npx vite` starts without errors.
- [ ] Navigating to `http://localhost:5173` shows the app shell.
- [ ] Each route (`/`, `/setup`, `/skills`, `/rules`, `/analysis`, `/pr`, `/trends`, `/docs-status`, `/settings`) renders a placeholder.
- [ ] Tailwind classes render correctly (e.g., `bg-gray-100` produces a gray background).
- [ ] `npx vite build` produces output in `dist/client/`.

---

## 3. The Implementation Guide (AI-to-AI)

### 3.1 Context & Files
- **Primary Files**:
  - `vite.config.ts`
  - `src/client/index.html`
  - `src/client/main.tsx`
  - `src/client/App.tsx`
  - `src/client/components/Layout.tsx`
  - `src/client/index.css`
  - `tailwind.config.js`
  - `postcss.config.js`
- **Related Files**: `package.json` (add dependencies), `tsconfig.json` (may need JSX config)
- **New Files Needed**: Yes — all files listed above

### 3.2 Technical Logic

**Step 1: Update `tsconfig.json` for JSX**

Add to `compilerOptions`:
```json
{
  "jsx": "react-jsx"
}
```

**Step 2: Create `vite.config.ts`**

```typescript
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'node:path';

export default defineConfig({
  plugins: [react()],
  root: 'src/client',
  build: {
    outDir: '../../dist/client',
    emptyOutDir: true,
  },
  resolve: {
    alias: {
      '@client': path.resolve(__dirname, 'src/client'),
    },
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3847',
        changeOrigin: true,
      },
    },
  },
});
```

**Step 3: Create `tailwind.config.js`**

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    './src/client/**/*.{html,js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        brand: {
          50: '#f0f7ff',
          100: '#e0effe',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          900: '#1e3a5f',
        },
      },
    },
  },
  plugins: [],
};
```

**Step 4: Create `postcss.config.js`**

```javascript
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```

**Step 5: Create `src/client/index.css`**

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  @apply bg-gray-50 text-gray-900;
}
```

**Step 6: Create `src/client/index.html`**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VibeLint</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="./main.tsx"></script>
  </body>
</html>
```

**Step 7: Create `src/client/main.tsx`**

```tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>,
);
```

**Step 8: Create `src/client/components/Layout.tsx`**

```tsx
import React from 'react';
import { NavLink, Outlet } from 'react-router-dom';

const navItems = [
  { to: '/', label: 'Dashboard', icon: '~' },
  { to: '/skills', label: 'Skills Editor', icon: '~' },
  { to: '/rules', label: 'Rules Editor', icon: '~' },
  { to: '/analysis', label: 'Analysis', icon: '~' },
  { to: '/pr', label: 'PR Navigator', icon: '~' },
  { to: '/trends', label: 'Trends', icon: '~' },
  { to: '/docs-status', label: 'Docs Status', icon: '~' },
  { to: '/settings', label: 'Settings', icon: '~' },
];

export default function Layout() {
  return (
    <div className="flex h-screen">
      {/* Sidebar */}
      <aside className="w-64 bg-gray-900 text-white flex flex-col">
        <div className="p-4 text-xl font-bold border-b border-gray-700">
          VibeLint
        </div>
        <nav className="flex-1 p-2 space-y-1">
          {navItems.map((item) => (
            <NavLink
              key={item.to}
              to={item.to}
              end={item.to === '/'}
              className={({ isActive }) =>
                `block px-3 py-2 rounded text-sm ${
                  isActive
                    ? 'bg-brand-600 text-white'
                    : 'text-gray-300 hover:bg-gray-800'
                }`
              }
            >
              {item.label}
            </NavLink>
          ))}
        </nav>
      </aside>

      {/* Main Content */}
      <main className="flex-1 overflow-y-auto p-6">
        <Outlet />
      </main>
    </div>
  );
}
```

**Step 9: Create `src/client/App.tsx`**

```tsx
import React from 'react';
import { Routes, Route } from 'react-router-dom';
import Layout from './components/Layout';

// Placeholder page components
function PlaceholderPage({ title }: { title: string }) {
  return (
    <div className="max-w-4xl">
      <h1 className="text-2xl font-bold mb-4">{title}</h1>
      <p className="text-gray-500">This page is under construction.</p>
    </div>
  );
}

const Dashboard = () => <PlaceholderPage title="Dashboard" />;
const SetupWizard = () => <PlaceholderPage title="Setup Wizard" />;
const SkillsEditor = () => <PlaceholderPage title="Skills Editor" />;
const RulesEditor = () => <PlaceholderPage title="Rules Editor" />;
const AnalysisView = () => <PlaceholderPage title="Analysis" />;
const PRNavigator = () => <PlaceholderPage title="PR Navigator" />;
const Trends = () => <PlaceholderPage title="Trends" />;
const DocsStatus = () => <PlaceholderPage title="Docs Status" />;
const Settings = () => <PlaceholderPage title="Settings" />;

export default function App() {
  return (
    <Routes>
      <Route element={<Layout />}>
        <Route path="/" element={<Dashboard />} />
        <Route path="/setup" element={<SetupWizard />} />
        <Route path="/skills" element={<SkillsEditor />} />
        <Route path="/rules" element={<RulesEditor />} />
        <Route path="/analysis" element={<AnalysisView />} />
        <Route path="/pr" element={<PRNavigator />} />
        <Route path="/trends" element={<Trends />} />
        <Route path="/docs-status" element={<DocsStatus />} />
        <Route path="/settings" element={<Settings />} />
      </Route>
    </Routes>
  );
}
```

**Step 10: Install dependencies**

```bash
npm install react react-dom react-router-dom
npm install -D vite @vitejs/plugin-react tailwindcss postcss autoprefixer @types/react @types/react-dom
```

### 3.3 API Contract
N/A — this story is frontend scaffolding. The proxy config maps `/api/*` requests to `http://localhost:3847/api/*` for development.

---

## 4. Definition of Done (The Gate)
- [ ] `vite.config.ts` exists with React plugin, proxy config, and correct build output path.
- [ ] `tailwind.config.js` and `postcss.config.js` exist and are properly configured.
- [ ] `src/client/index.html` exists with `<div id="root">`.
- [ ] `src/client/main.tsx` renders `<App />` inside `<BrowserRouter>`.
- [ ] `src/client/App.tsx` defines routes for all 9 pages.
- [ ] `src/client/components/Layout.tsx` renders a sidebar with navigation links and an `<Outlet />`.
- [ ] `npx vite` starts the dev server without errors.
- [ ] `npx vite build` produces output in `dist/client/`.
- [ ] All navigation links work and render placeholder content.
